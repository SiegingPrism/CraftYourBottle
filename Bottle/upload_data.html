<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Admin Tools - Upload Data</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-900 text-white min-h-screen flex items-center justify-center">
    <div class="max-w-md w-full p-8 bg-slate-800 rounded-2xl shadow-xl border border-slate-700 text-center">
        <h1 class="text-3xl font-bold mb-4">Database Seeder</h1>
        <p class="text-slate-400 mb-8">Click below to upload the initial product catalog to your live Firebase database.
        </p>

        <button onclick="seedDatabase()" id="seedBtn"
            class="w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-4 rounded-xl transition-all shadow-lg shadow-blue-500/20">
            Upload Products
        </button>

        <div id="status" class="mt-6 text-sm font-mono text-slate-300 min-h-[20px]"></div>
    </div>

    <script type="module">
        import { db, collection, addDoc } from './firebase-config.js';

        const PRODUCTS = [
            {
                name: "Sport Hydration Bottle",
                price: 24.99,
                description: "Ergonomic design with flip-top spout and carrying loop. Ideal for gym, hiking, and outdoor activities.",
                image: "https://images.unsplash.com/photo-1602143407151-11115cd225ca?auto=format&fit=crop&q=80&w=400",
                rating: 4.8,
                reviews: 124,
                category: "sport"
            },
            {
                name: "Insulated Travel Flask",
                price: 32.50,
                description: "Double-wall vacuum insulation keeps drinks hot for 12 hours or cold for 24 hours.",
                image: "https://images.unsplash.com/photo-1592323602166-4ba29f45f942?auto=format&fit=crop&q=80&w=400",
                rating: 4.9,
                reviews: 89,
                category: "travel"
            },
            {
                name: "Glass Infuser Bottle",
                price: 28.00,
                description: "Borosilicate glass with silicone sleeve. Includes stainless steel infuser for tea or fruit.",
                image: "https://images.unsplash.com/photo-1605218427368-35b0d046e72c?auto=format&fit=crop&q=80&w=400",
                rating: 4.7,
                reviews: 215,
                category: "lifestyle"
            }
        ];

        window.seedDatabase = async () => {
            const btn = document.getElementById('seedBtn');
            const status = document.getElementById('status');

            btn.disabled = true;
            btn.classList.add('opacity-50', 'cursor-not-allowed');
            status.innerHTML = '<span class="text-yellow-400">Uploading...</span>';

            try {
                const colRef = collection(db, "products");
                let count = 0;

                for (const product of PRODUCTS) {
                    await addDoc(colRef, product);
                    count++;
                    status.innerHTML = `Uploaded ${count}/${PRODUCTS.length} items...`;
                }

                status.innerHTML = '<span class="text-green-400">âœ… Success! Database populated.</span>';
            } catch (error) {
                console.error(error);
                status.innerHTML = `<span class="text-red-400">Error: ${error.message}</span>`;
                btn.disabled = false;
                btn.classList.remove('opacity-50', 'cursor-not-allowed');
            }
        }
    </script>
</body>

</html>